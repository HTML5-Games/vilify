<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Vilify</title>
    <style>
        body {
            background: #f0f0f0;
        }
        
        canvas {
            margin: auto;
            border: 1px solid #111;
        }
    </style>
</head>
<body>
    <!-- Import Phaser Engine -->
    <script src="js/phaser.min.js"></script>
    
    <!-- Utilities -->
    <script type="text/javascript" src="js/utilities.js"></script>
    
    <!-- Classes -->
    <script type="text/javascript" src="js/superclasses.js"></script>
    <script type="text/javascript" src="js/groups.js"></script>
    <script type="text/javascript" src="js/item.js"></script>
    <script type="text/javascript" src="js/tower.js"></script>
    <script type="text/javascript" src="js/projectile.js"></script>
    <script type="text/javascript" src="js/hero.js"></script>
    <script type="text/javascript" src="js/monster.js"></script>
    
    <!-- Data -->
    <script type="text/javascript" src="game_data/model_data.js"></script>
    <script type="text/javascript" src="game_data/view_data.js"></script>
    
    <script type="text/javascript">
        window.onload = function() {
            var game = new Phaser.Game(960, 640, Phaser.AUTO, '', {preload: preload, create: create, update: update});
    
            function preload() {
                // Load game images
                game.load.image('logo', '/images/logo.png');
                
                // Load item images
                game.load.image('alien item', '/images/items/alien.png');
                game.load.image('biochem item', '/images/items/biochemical.png');
                game.load.image('tech item', '/images/items/tech.png');
                
                // Load tower sprites
                game.load.atlasJSONHash('base', '/images/base/sheet.png', '/images/base/data.json');
                game.load.atlasJSONHash('turret', '/images/turret/sheet.png', '/images/turret/data.json');
                
                // Load monster sprites
                //game.load.spritesheet('scrapyard robot', '/images/monsters/scrapyard_robot.png', 329, 262);
                game.load.atlasJSONHash('werewolf', '/images/werewolf/sheet-running.png', '/images/werewolf/data-running.json');
                
                // Load hero sprites
                game.load.atlasJSONHash('soldier', '/images/soldier/sheet.png', '/images/soldier/data.json');
                game.load.atlasJSONHash('tank', '/images/tank/sheet.png', '/images/tank/data.json');
                game.load.atlasJSONHash('helicopter', '/images/helicopter/sheet.png', '/images/helicopter/data.json');
                game.load.atlasJSONHash('jet', '/images/jet/sheet.png', '/images/jet/data.json');
                
                // Load projectiles images
                game.load.image('missile', '/images/projectiles/red2.png');
            }
    
            function create() { 
                // Set world bounds
                game.world.setBounds(-2000, 0, game.world.width + 2000 * 2, game.world.height);
                
                // Using arcade physics engine
                game.physics.startSystem(Phaser.Physics.ARCADE);
                
                // Set background color of game canvas to white
                game.stage.backgroundColor = 0xffffff;
                
                // Create projecitle group
                projectiles = ObjectGroup(game);
                
                // Create towers group
                towers = ObjectGroup(game);
                towers.add(Tower(game, "basic", 300));
                
                // Create hero
                hero = Hero(game, "helicopter");
                
                // Create monsters group
                monsters = ObjectGroup(game);
                monsters.add(Monster(game, "werewolf"));
                
                item = Item(game, "biochem item", {x: 100, y: 100});
            }
            
            function update() {
                // Update game objects
                projectiles.update();
                towers.update();
                monsters.update();
            }
        };
    </script>
</body>
</html>